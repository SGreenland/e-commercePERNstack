{"version":3,"sources":["Store.js","components/Product.js","components/Products.js","images/logo.png","components/AlertBox.js","components/CartItem.js","components/Cart.js","components/CheckoutForm.js","config.js","index.js","App.js","components/CheckoutWrapper.js"],"names":["products","name","details","image","width","src","alt","price","qty","description","useStore","create","set","get","isValidUser","setValidUser","a","fetch","credentials","response","ok","text","alert","userName","itemCount","addItemCount","state","removeItems","setProdDefault","itemNames","map","product","itemPrices","greyOut","container","document","getElementById","style","zIndex","backgroundColor","filterProducts","e","inputValue","value","key","target","filter","toLowerCase","cartStore","persist","cartItems","getStorage","sessionStorage","Product","detail","className","id","fontWeight","onClick","push","i","length","getState","setState","animation","setTimeout","Products","AlertBox","CartItem","item","total","currentItems","toFixed","updatedItems","slice","paddingInline","display","alignItems","newSlice","splice","indexOf","Cart","props","pricesArr","useEffect","forEach","prod","getPricesArr","reduce","current","colSpan","to","pathname","CheckoutForm","stripe","useStripe","elements","useElements","useState","setSucceeded","setProcessing","clientSecret","setClientSecret","getItem","email","setEmail","progVal","getElementsByTagName","alertBox","progressBar","setInterval","preventDefault","confirmCardPayment","payment_method","card","getElement","CardElement","billing_details","receipt_email","payload","error","innerHTML","message","method","headers","body","JSON","stringify","items","json","console","log","getKey","inputStyle","border","borderRadius","height","padding","margin","onSubmit","minWidth","flexDirection","type","placeholder","required","onChange","for","disabled","onMouseOver","max","CONFIG","STRIPE_PUBLIC_KEY","ReactDOM","render","exact","path","component","menuStyle","textAlign","productRef","useRef","x","y","parse","logo","onKeyPress","onKeyUp","match","includes","toUpperCase","class","fontFamily","setUserName","password","setPassword","onSubmitForm","constraint","pattern","title","getUser","withCredentials","user","setItem","promise","loadStripe","totalCost","location","justifyContent","listStyle"],"mappings":"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","file":"static/js/main.fe6309cc.chunk.js","sourcesContent":["\r\nimport create from \"zustand\";\r\nimport { persist } from \"zustand/middleware\";\r\n\r\nconst products = [\r\n  {\r\n    name: \"Bananas\",\r\n    details: \"(5 pack)\",\r\n    image: (\r\n      <img\r\n        width=\"60%\"\r\n        src=\"https://images.ctfassets.net/6jpeaipefazr/2RmcxZM3iBnnPzQ1pFZ4Hg/da538d311b629159541cec1aae50ac11/F3_Bananas_1000x1000.jpg?w=1080&h=1080\"\r\n        alt=\"bananas\"\r\n      />\r\n    ),\r\n    price: 0.8,\r\n    qty: 0,\r\n    description: \"Brazil's finest fair trade bunch of 5 bananas\"\r\n  },\r\n  {\r\n    name: \"Apples\",\r\n    details: \"(4 pack)\",\r\n    image: (\r\n      <img\r\n        width=\"60%\"\r\n        src=\"https://bellavitashop.co.uk/6288-large_default/red-apples-500g.jpg\"\r\n        alt=\"apples\"\r\n      />\r\n    ),\r\n    price: 0.4,\r\n    qty: 0,\r\n    description: \"Class 2 succulent Spanish red apples - 4pk.\"\r\n  },\r\n  {\r\n    name: \"Oranges\",\r\n    details: \"(4 pack)\",\r\n    image: (\r\n      <img\r\n        width=\"60%\"\r\n        src=\"https://theartisanfoodcompany.com/wp-content/uploads/2021/05/Navel-Oranges-The-Artisan-Food-Company.jpg\"\r\n        alt=\"oranges\"\r\n      />\r\n    ),\r\n    price: 0.5,\r\n    qty: 0,\r\n    description: \"Juicy class 1 South African oranges, may contain pips.\"\r\n  },\r\n  {\r\n    name: \"Peaches\",\r\n    details: \"(4 pack)\",\r\n    image: (\r\n      <img\r\n        width=\"60%\"\r\n        src=\"https://static.libertyprim.com/files/familles/peche-large.jpg?1574630286\"\r\n        alt=\"peaches\"\r\n      />\r\n    ),\r\n    price: 1.1,\r\n    qty: 0,\r\n    description: \"Perfectly ripe, Class I peaches with a sweet and juicy flavour.\"\r\n  },\r\n  { name: \"Melon\", \r\n    details: \"(single)\",\r\n    image: (\r\n      <img\r\n        width=\"60%\"\r\n        src=\"https://static.libertyprim.com/files/familles/melon-large.jpg?1574629891\"\r\n        alt=\"Melon\"\r\n      />\r\n    ),\r\n   price: 1.5, \r\n   qty: 0,\r\n   description: \"Sweet and fragrant, packed with vitamins & goodness!\"\r\n   },\r\n  { name: \"Blueberries\",\r\n    details: \"(150g)\",\r\n    image: (\r\n      <img\r\n        width=\"60%\"\r\n        src=\"https://www.redsofa.co.za/wp-content/uploads/products/blueberries-1.png\"\r\n        alt=\"blueberries\"\r\n      />\r\n    ),\r\n     price: 1.2, \r\n     qty: 0,\r\n     description: \"Hand picked for freshness, perfect for breakfast! \"\r\n     },\r\n];\r\n\r\nconst useStore = create(\r\n    (set, get) => ({\r\n      isValidUser: false,\r\n      setValidUser: async () => {\r\n        try {\r\n          const response = await fetch(\"https://samsfruitstore-pernstack.herokuapp.com/verify\", {\r\n            credentials: \"include\",\r\n\r\n          });\r\n\r\n          if (response.ok) {\r\n            set({ isValidUser: true });\r\n          }\r\n          else {\r\n            const error = await response.text()\r\n            if (error === \"jwt expired\") {\r\n              alert(\"your session has timed out.\")\r\n              set({isValidUser: false});    \r\n            }\r\n          }\r\n\r\n        } catch (error) {\r\n          \r\n          return;\r\n        }\r\n      },\r\n      userName: \"\",\r\n      itemCount: 0,\r\n      addItemCount: () => set((state) => ({ itemCount: state.itemCount + 1 })),\r\n      removeItems: () => set({ itemCount: 0 }),\r\n      products: products,\r\n      setProdDefault: () => set((state) => ({ products: products })),\r\n      itemNames: products.map((product) => product.name),\r\n      itemPrices: products.map((product) => product.price),\r\n      greyOut: () => {\r\n        const container = document.getElementById(\"formy\") || document.getElementById(\"checkout\");\r\n\r\n        \r\n        if(container) {container.style.zIndex = \"-1\";}\r\n      document.getElementById(\"root\").style.backgroundColor = \"rgba(0,0,0,0.5)\";\r\n\r\n      },\r\n\r\n      // input: \"\",\r\n      // setInput: (e) => set(state => ({ input: e.target.value})),\r\n\r\n      filterProducts: (e) => {\r\n        const inputValue = document.getElementById(\"searchbar\").value;\r\n\r\n        if (\r\n          e.key === \"Enter\" ||\r\n          e.target === document.getElementById(\"searchbtn\")\r\n        ) {\r\n          set((state) => ({\r\n            products: state.products.filter(\r\n              (product) => \r\n                product.name === inputValue ||\r\n                product.name.toLowerCase() === inputValue\r\n            ),\r\n          }));\r\n        }\r\n      },\r\n\r\n      // cartItems: [],\r\n    }));\r\n\r\n    export const cartStore = create(persist(\r\n      (set,get) => ({\r\n        cartItems: [],\r\n        \r\n      }),\r\n      {\r\n        name: \"cart\",\r\n        getStorage: () => sessionStorage\r\n      }\r\n    ));\r\n\r\nexport default useStore;\r\n","import React from \"react\";\r\nimport useStore from \"../Store\";\r\nimport {cartStore} from \"../Store\";\r\n\r\nfunction Product({ name, price, image, qty, description, detail }) {\r\n  const cartItems = cartStore((state) => state.cartItems);\r\n  let product = {name, qty, price, description}\r\n\r\n  function animateCart() {\r\n     document.getElementById(\"carty\").style.animation = \"bounce 250ms\";\r\n\r\n     setTimeout(() => document.getElementById(\"carty\").style.animation = \"none\", 500)\r\n    \r\n  }\r\n  \r\n\r\n\r\n  function addToCart() {\r\n\r\n    cartItems.push(product);\r\n\r\n    \r\n    for (let i=0; i<cartItems.length; i++) {\r\n      if (cartItems[i].name === name) {\r\n        cartItems[i].qty++\r\n        cartItems[i].price = cartItems[i].qty * price\r\n      }\r\n      \r\n    }\r\n      \r\n    \r\n\r\n    const state = useStore.getState().itemCount;\r\n    cartStore.setState({cartItems: cartItems})\r\n\r\n    useStore.setState({ itemCount: state + 1 });\r\n    animateCart();\r\n  }\r\n\r\n  return (\r\n    <div className=\"product\">\r\n      <div id=\"innerProd\">\r\n      <div style={{fontWeight: \"500\"}}>{name}<span style={{fontWeight: \"lighter\"}}> {detail}</span></div>\r\n      <div id=\"prodImg\">{image}\r\n      <div id=\"prodDescrip\">{description}</div>\r\n      </div>\r\n      \r\n      <div>£{price}0</div>\r\n      <button className=\"addToCart\" onClick={addToCart}>\r\n        Add to Cart\r\n      </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Product;\r\n","import React from \"react\";\r\nimport Product from \"./Product\";\r\nimport useStore from \"../Store\";\r\n\r\nfunction Products() {\r\n  const products = useStore((state) => state.products);\r\n\r\n  \r\n  return (\r\n    <div className=\"products\">\r\n      {products.length\r\n        ? products.map((product) => (\r\n            <Product\r\n              name={product.name}\r\n              detail={product.details}\r\n              price={product.price}\r\n              image={product.image}\r\n              qty={product.qty}\r\n              description={product.description}\r\n            />\r\n          ))\r\n        : \"Couldn't find product\"}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Products;\r\n","export default __webpack_public_path__ + \"static/media/logo.54513202.png\";","import React from 'react'\r\n\r\nexport default function AlertBox() {\r\n    return (\r\n        <div id=\"alertBox\">\r\n        </div>\r\n    )\r\n}\r\n","import React from \"react\";\r\nimport useStore from \"../Store\";\r\nimport {cartStore} from \"../Store\";\r\n// import _ from 'lodash';\r\n\r\nexport default function CartItem({ item, total }) {\r\n  const cartItems = cartStore((state) => state.cartItems);\r\n  const products = useStore((state) => state.products);\r\n\r\n\r\n  function removeItem() {\r\n    let newSlice = cartItems.slice();\r\n\r\n    newSlice.splice(newSlice.indexOf(item), 1);\r\n\r\n    cartStore.setState({ cartItems: newSlice });\r\n\r\n    const currentItems = useStore.getState().itemCount;\r\n    useStore.setState({ itemCount: currentItems - 1 });\r\n  }\r\n\r\n  var currentItems = cartStore.getState().cartItems;\r\n  var product = products.filter((product) => product.name === item.name);\r\n\r\n  function addQty() {\r\n    for (let i = 0; i < currentItems.length; i++) {\r\n      if (currentItems[i].name === item.name) {\r\n        currentItems[i].qty = item.qty + 1;\r\n        currentItems[i].price = item.price + product[0].price;\r\n      }\r\n    }\r\n\r\n    const updatedItems = currentItems.slice();\r\n\r\n    cartStore.setState({ cartItems: updatedItems });\r\n\r\n    // console.log(updatedItems);\r\n  }\r\n\r\n  function minusQty() {\r\n    for (let i = 0; i < currentItems.length; i++) {\r\n      if (currentItems[i].name === item.name && item.qty > 1) {\r\n        currentItems[i].qty = item.qty - 1;\r\n        currentItems[i].price = item.price - product[0].price;\r\n      }\r\n    }\r\n\r\n    const updatedItems = currentItems.slice();\r\n\r\n    cartStore.setState({ cartItems: updatedItems });\r\n  }\r\n\r\n  return (\r\n    <tr id=\"cartItems\">\r\n      <td>{item.name}</td>\r\n      <td>£{item.price.toFixed(2)}</td>\r\n      <td id=\"qtybtnContainer\">\r\n        <button id=\"qtybtn\" onClick={minusQty}>\r\n          -\r\n        </button>\r\n        <div style={{paddingInline: \"3px\", display: \"flex\", alignItems: \"center\"}}>{item.qty}</div>\r\n        <button id=\"qtybtn\" onClick={addQty}>\r\n          +\r\n        </button>\r\n      </td>\r\n      <td className=\"deleteField\">\r\n        <button className=\"cartBtns\" onClick={removeItem}>\r\n          delete\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport useStore from \"../Store\";\r\nimport { cartStore } from \"../Store\";\r\nimport CartItem from \"./CartItem\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Cart(props) {\r\n  const cartItems = cartStore((state) => state.cartItems);\r\n  let i = 0;\r\n  const pricesArr = [];\r\n  const products = useStore((state) => state.products);\r\n  const setValidUser = useStore((state) => state.setValidUser);\r\n\r\n  useEffect(() => {\r\n    setValidUser();\r\n    cartItems.map((item) =>\r\n      products.forEach((prod) => {\r\n        if (prod.name === item.name) {\r\n          item.price = prod.price * item.qty;\r\n        }\r\n        useStore.setState({ cartItems: cartItems });\r\n      })\r\n    );\r\n  });\r\n  function clearCart() {\r\n    cartStore.setState({ cartItems: [] });\r\n    useStore.setState({ itemCount: 0 });\r\n  }\r\n\r\n  const getPricesArr = async () => {\r\n    for (let i = 0; i < cartItems.length; i++)\r\n      pricesArr.push(cartItems[i].price);\r\n  };\r\n\r\n  getPricesArr();\r\n\r\n  let total = cartItems.length\r\n    ? pricesArr.reduce((total, current) => total + current).toFixed(2)\r\n    : 0;\r\n\r\n  return (\r\n    <div className=\"cart\">\r\n      <table>\r\n        <thead>\r\n          <th colSpan=\"4\" id=\"cartHead\">\r\n            Cart\r\n          </th>\r\n        </thead>\r\n        {cartItems.map((item) => (\r\n          <CartItem item={cartItems[i++]} total={total} />\r\n        ))}\r\n        <tr className=\"totalRow\">\r\n          <th>Total</th>\r\n          <td>£{total}</td>\r\n          <td colSpan=\"2\" id=\"clearCartField\">\r\n            <button className=\"clearCart\" onClick={clearCart}>\r\n              Clear Cart\r\n            </button>\r\n          </td>\r\n        </tr>\r\n        <tfoot>\r\n          <tr>\r\n            <td colSpan=\"2\">\r\n              <button className=\"cartBtns\">\r\n                <Link to=\"/\" style={{display: \"block\", width: \"100%\"}}>\r\n                 Back\r\n                </Link>\r\n                \r\n              </button>\r\n            </td>\r\n            <td colSpan=\"2\">\r\n              <button className=\"cartBtns\">\r\n                <Link to={{ pathname: \"/checkout\", total: total }} style={{display: \"block\", width: \"100%\"}}>\r\n                 Checkout\r\n                </Link>\r\n                \r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </tfoot>\r\n      </table>\r\n\r\n      <div>{cartItems.length === 0 && <div>Cart is Empty</div>}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cart;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\nimport useStore from \"../Store\";\r\nimport { cartStore } from \"../Store\";\r\n\r\nexport default function CheckoutForm({ total }) {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const [succeeded, setSucceeded] = useState(false);\r\n  // const [error, setError] = useState(null);\r\n  const [processing, setProcessing] = useState(\"\");\r\n  const [disabled, setDisabled] = useState(true);\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n  const [email, setEmail] = useState(sessionStorage.getItem(\"userEmail\"));\r\n  const isValidUser = useStore.getState().isValidUser;\r\n  const btnStyle = { width: \"100%\", borderRadius: \"4px\", margin: \"5px\" };\r\n  var progVal = document.getElementsByTagName(\"progress\")[0];\r\n  var alertBox = document.getElementById(\"alertBox\");\r\n  const cartItems = cartStore((state) => state.cartItems);\r\n\r\n  useEffect(() => {\r\n    // Create PaymentIntent as soon as the page loads\r\n\r\n    const getKey = async () => {\r\n      try {\r\n        const response = await fetch(\"https://samsfruitstore-pernstack.herokuapp.com/pay\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          credentials: \"include\",\r\n          body: JSON.stringify({ total: total, items: cartItems }),\r\n        });\r\n\r\n        if (response.ok) {\r\n          const key = await response.json();\r\n          setClientSecret(key.clientSecret);\r\n        }\r\n      } catch (error) {\r\n        console.log(error.message);\r\n      }\r\n    };\r\n    getKey();\r\n  }, []);\r\n\r\n  function progressBar() {\r\n    progVal.style.display = \"flex\";\r\n    setInterval(() => {\r\n      progVal.value += 1;\r\n      if (progVal.value === 10) {\r\n        progVal.value = 1;\r\n      }\r\n      if (alertBox.style.display === \"flex\") {\r\n        progVal.style.display = \"none\";\r\n      }\r\n    }, 250);\r\n  }\r\n\r\n  function mustBeLoggedIn() {\r\n    if (!isValidUser) {\r\n      useStore.getState().greyOut();\r\n      alertBox.style.display = \"flex\";\r\n      alertBox.innerHTML = `You must be logged in to make a payment. <button><a href=\"/login\">Ok</a></button>`;\r\n    }\r\n  }\r\n\r\n  async function handleSubmit(e) {\r\n    progressBar();\r\n    e.preventDefault();\r\n    setProcessing(true);\r\n\r\n    if (!stripe || !elements) {\r\n      return;\r\n    }\r\n\r\n    const payload = await stripe.confirmCardPayment(clientSecret, {\r\n      payment_method: {\r\n        card: elements.getElement(CardElement),\r\n        billing_details: {\r\n          name: document.getElementById(\"nameField\").value,\r\n        },\r\n      },\r\n      receipt_email: document.getElementById(\"emailField\").value,\r\n    });\r\n\r\n    if (payload.error) {\r\n      setProcessing(false);\r\n      useStore.getState().greyOut();\r\n      alertBox.style.display = \"flex\";\r\n      alertBox.innerHTML = `Payment failed: ${payload.error.message}<button><a href=\"/\">Ok</button>`;\r\n    } else {\r\n      setProcessing(false);\r\n      setSucceeded(true);\r\n      useStore.getState().greyOut();\r\n      alertBox.style.display = \"flex\";\r\n      alertBox.innerHTML = `Payment was successful! <button><a href=\"/\">Ok</button>`;\r\n    }\r\n  }\r\n\r\n  async function storeOrder(e) {\r\n    const createOrder = await fetch(\"https://samsfruitstore-pernstack.herokuapp.com/confirm_order\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      credentials: \"include\",\r\n      body: JSON.stringify({\r\n        total: total,\r\n        items: cartItems.map((item) => {\r\n          return [item.name, item.price, item.qty];\r\n        }),\r\n      }),\r\n    });\r\n\r\n    if (createOrder.ok) {\r\n      return;\r\n    } else {\r\n      alert(\"could not process order\");\r\n    }\r\n  }\r\n\r\n  function changeEmail(e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  const inputStyle = {\r\n    width: \"100%\",\r\n    border: \"2px outset lightgrey\",\r\n    borderRadius: \"4px\",\r\n    height: \"3vh\",\r\n    padding: \"10px\",\r\n    margin: \"5px\",\r\n  };\r\n  const inputStyle2 = {\r\n    width: \"100%\",\r\n    border: \"2px outset lightgrey\",\r\n    borderRadius: \"4px\",\r\n    padding: \"2px\",\r\n    margin: \"5px\",\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* <AlertBox /> */}\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        style={{\r\n          minWidth: \"300px\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n        }}\r\n        id=\"checkout\"\r\n      >\r\n        <label>Email</label>\r\n        <input\r\n          id=\"emailField\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          style={inputStyle}\r\n          required\r\n          value={email}\r\n          onChange={changeEmail}\r\n        ></input>\r\n        <label for=\"nameField\">Name</label>\r\n        <input\r\n          style={inputStyle}\r\n          placeholder=\"Name\"\r\n          id=\"nameField\"\r\n          required\r\n        ></input>\r\n        <label>Shipping Address</label>\r\n        <input style={inputStyle} placeholder=\"Address Line 1\" required></input>\r\n        <input style={inputStyle} placeholder=\"Address Line 2\" required></input>\r\n        <input style={inputStyle} placeholder=\"Postcode/ZIP\" required></input>\r\n        <label>Card Details</label>\r\n        <div style={inputStyle2}>\r\n          <CardElement />\r\n        </div>\r\n        <button\r\n          id=\"payBtn\"\r\n          style={btnStyle}\r\n          type=\"submit\"\r\n          disabled={!stripe}\r\n          onClick={storeOrder}\r\n          onMouseOver={mustBeLoggedIn}\r\n        >\r\n          Pay\r\n        </button>\r\n        {\r\n          <progress\r\n            max=\"10\"\r\n            value=\"1\"\r\n            style={{ width: \"100%\", display: \"none\" }}\r\n          ></progress>\r\n        }\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n","const CONFIG = {\r\n    STRIPE_PUBLIC_KEY: \"pk_test_51JSONbCXjj4lbhryTeJsc7C3QfS0mTlcQY3cmJDy78OoOYqWdIKx4GLoDWpX5hBNUhAGaNjGdmg4lY0YSzFARdwr00NpGFhpRx\",\r\n}\r\n\r\nexport default CONFIG;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport Login, {Homepage, CreateNewUser } from './App';\nimport Cart from './components/Cart';\nimport CheckoutWrapper from './components/CheckoutWrapper';\nimport CheckoutForm from './components/CheckoutForm';\n\n\nReactDOM.render(\n    <Router>\n       <Switch>\n\t\t    <Route exact path=\"/\" component={Homepage}/>\n\t\t\t<Route exact path=\"/create-account\" component={CreateNewUser}/>\n            <Route exact path= \"/login\" component={Login}/>\n            <Route exact path= \"/cart\" component={Cart}/>\n            <Route exact path= \"/checkout\" component={CheckoutWrapper}/>\n\t    </Switch>\n    </Router>,\n    document.getElementById('root')\n);","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./App.css\";\r\nimport Products from \"./components/Products\";\r\nimport useStore from \"./Store\";\r\nimport { cartStore } from \"./Store\";\r\nimport logo from \"./images/logo.png\";\r\nimport AlertBox from \"./components/AlertBox\";\r\n\r\nexport const Homepage = (props) => {\r\n  const setValidUser = useStore((state) => state.setValidUser);\r\n  const isValidUser = useStore((state) => state.isValidUser);\r\n  const itemCount = useStore((state) => state.itemCount);\r\n  const filterProducts = useStore((state) => state.filterProducts);\r\n  const setProdDefault = useStore((state) => state.setProdDefault);\r\n  const cartItems = cartStore((state) => state.cartItems);\r\n  const products = useStore((state) => state.products);\r\n  const menuStyle = { width: \"50%\", textAlign: \"center\" };\r\n  const productRef = useRef(products);\r\n\r\n  useEffect(() => {\r\n    for (let x = 0; x < cartItems.length; x++) {\r\n      for (let y = x + 1; y < cartItems.length; y++) {\r\n        if (cartItems[x].name === cartItems[y].name) {\r\n          cartStore.setState({\r\n            cartItems: cartItems.filter(\r\n              (item) => cartItems.indexOf(item) !== y\r\n            ),\r\n          });\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    useStore.setState({\r\n      itemCount: JSON.parse(sessionStorage.getItem(\"cart\")).state.cartItems\r\n        .length,\r\n    });\r\n  });\r\n\r\n  useEffect(() => {\r\n    setValidUser();\r\n  }, []);\r\n\r\n  function filterProds(e) {\r\n    e.preventDefault();\r\n    for (let i = 0; i < e.target.value.length; i++) {\r\n      useStore.setState({\r\n        products: products.filter(\r\n          (prod) =>\r\n            prod.name.match(e.target.value[i]) ||\r\n            prod.name.includes(e.target.value[i].toUpperCase())\r\n        ),\r\n      });\r\n    }\r\n\r\n    if (e.key === \"Backspace\") {\r\n      for (let i = 0; i < e.target.value.length; i++) {\r\n        useStore.setState({\r\n          products: productRef.current.filter(\r\n            (prod) =>\r\n              prod.name.match(e.target.value[i]) ||\r\n              prod.name.includes(e.target.value[i].toUpperCase())\r\n          ),\r\n        });\r\n      }\r\n    }\r\n    !e.target.value && setProdDefault();\r\n  }\r\n\r\n\r\n  async function logout() {\r\n    const response = await fetch(\"https://samsfruitstore-pernstack.herokuapp.com/logout\", {\r\n      credentials: \"include\",\r\n    });\r\n\r\n    !response.ok && alert(\"error\");\r\n\r\n    useStore.setState({ isValidUser: false });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"homepage-nav\">\r\n        <div className=\"logocontainer\">\r\n          <picture>\r\n            <img src={logo} alt=\"logo\" width=\"100%\" height=\"95%\" />\r\n          </picture>\r\n        </div>\r\n        <div id=\"inputcontainer\">\r\n          <input\r\n            id=\"searchbar\"\r\n            placeholder=\"Search product\"\r\n            onKeyPress={filterProducts}\r\n            onKeyUp={filterProds}\r\n          />\r\n          <button\r\n            onClick={filterProducts}\r\n            id=\"searchbtn\"\r\n            type=\"submit\"\r\n            className=\"fas fa-search\"\r\n          ></button>\r\n        </div>\r\n        <div id=\"login-signup\">\r\n          <Link to=\"/login\" onClick={isValidUser && logout} style={menuStyle}>\r\n            {isValidUser ? \"Logout\" : \"Login\"}\r\n          </Link>\r\n          <span className=\"cartIcon\" style={menuStyle}>\r\n            <Link to=\"/cart\" class=\"fas fa-shopping-cart\" id=\"carty\">\r\n              <span style={{ fontFamily: \"monospace\" }}>{itemCount} </span>\r\n            </Link>\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"prodContainer\">\r\n        <Products />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport function CreateNewUser() {\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  var alertBox = document.getElementById(\"alertBox\");\r\n\r\n  const onSubmitForm = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const body = { userName, email, password };\r\n\r\n      const response = await fetch(\"https://samsfruitstore-pernstack.herokuapp.com/create_user\", {\r\n        method: \"POST\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify(body),\r\n      });\r\n\r\n      if (response.ok) {\r\n        // const user = await response.json();\r\n\r\n        alertBox.style.display = \"flex\";\r\n        alertBox.innerHTML = `Account created successfully!<button><a href=\"/login\">Login</a></button>`;\r\n        useStore.getState().greyOut();\r\n      } else {\r\n        const error = await response.json();\r\n        alertBox.style.display = \"flex\";\r\n        alertBox.innerHTML = `${\r\n          error.constraint === \"unique_email\" && \"Email already registered.\"\r\n        }<button onclick = window.location.reload()>Try again</button>`;\r\n        useStore.getState().greyOut();\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AlertBox />\r\n      <div id=\"formy\">\r\n        <h1>Create Account</h1>\r\n        <form onSubmit={onSubmitForm}>\r\n          <input\r\n            className=\"formInput\"\r\n            required\r\n            placeholder=\"username\"\r\n            value={userName}\r\n            onChange={(e) => {\r\n              setUserName(e.target.value);\r\n            }}\r\n          ></input>\r\n          <input\r\n            className=\"formInput\"\r\n            required\r\n            type=\"email\"\r\n            placeholder=\"email\"\r\n            value={email}\r\n            onChange={(e) => {\r\n              setEmail(e.target.value);\r\n            }}\r\n          ></input>\r\n          <input\r\n            className=\"formInput\"\r\n            id=\"pwfield\"\r\n            required\r\n            type=\"password\"\r\n            pattern=\"(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$\"\r\n            title=\"Password must be more than 8 characters, contain Upper and lower case letters, a number and a special character.\"\r\n            placeholder=\"password\"\r\n            value={password}\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n          ></input>\r\n\r\n          <button className=\"formBtn\" type=\"submit\">\r\n            Create!\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const setValidUser = useStore((state) => state.setValidUser);\r\n  var alertBox = document.getElementById(\"alertBox\");\r\n  const body = { email, password };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      setValidUser();\r\n     }\r\n    }, []);\r\n\r\n  const getUser = async (e) => {\r\n    e.preventDefault();\r\n  \r\n\r\n    try {\r\n      const response = await fetch(\"https://samsfruitstore-pernstack.herokuapp.com/login\", {\r\n        method: \"POST\",\r\n        headers: { \"content-type\": \"application/json\" },\r\n        body: JSON.stringify(body),\r\n        withCredentials: true,\r\n        credentials: \"include\",\r\n      });\r\n\r\n      if (response.ok) {\r\n        const user = await response.json();\r\n\r\n        var userName = user.userName;\r\n        sessionStorage.setItem(\"userEmail\", email);\r\n\r\n        alertBox.style.display = \"flex\";\r\n        alertBox.innerHTML = `Welcome ${userName}!<button><a href=\"/\">Start Shopping!</a></button>`;\r\n        useStore.getState().greyOut();\r\n      } else {\r\n        alertBox.style.display = \"flex\";\r\n        alertBox.innerHTML = `Email or Password incorrect! <button><a href=\"/login\">Try again</a></button>`;\r\n        useStore.getState().greyOut();\r\n      }\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AlertBox />\r\n      <div id=\"formy\">\r\n        <h1>Login</h1>\r\n        <form onSubmit={getUser}>\r\n          <input\r\n            className=\"formInput\"\r\n            placeholder=\"email\"\r\n            value={email}\r\n            onChange={(e) => {\r\n              setEmail(e.target.value);\r\n            }}\r\n          ></input>\r\n          <input\r\n            className=\"formInput\"\r\n            placeholder=\"password\"\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => {\r\n              setPassword(e.target.value);\r\n            }}\r\n          ></input>\r\n          <button className=\"formBtn\" type=\"submit\">\r\n            Login\r\n          </button>\r\n        </form>\r\n        <Link to=\"/create-account\">\r\n          <p id=\"signupLink\">Not got an account? Sign up!</p>\r\n        </Link>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport CheckoutForm from \"./CheckoutForm\";\r\nimport useStore from \"../Store\";\r\nimport { cartStore } from \"../Store\";\r\nimport AlertBox from \"./AlertBox\";\r\nimport CONFIG from \"../config\";\r\n\r\nexport default function CheckoutWrapper(props) {\r\n  const cartItems = cartStore((state) => state.cartItems);\r\n  const setValidUser = useStore((state) => state.setValidUser);\r\n  const promise = loadStripe(CONFIG.STRIPE_PUBLIC_KEY);\r\n  const totalCost = props.location.total;\r\n  const paymentFormStyle = { display: \"flex\", justifyContent: \"center\" };\r\n\r\n  useEffect(() => {\r\n    setValidUser();\r\n  });\r\n\r\n  function getTotal() {\r\n    if (cartItems.length) {\r\n      const prices = cartItems.map((item) => item.price);\r\n      return prices.reduce((total, current) => total + current).toFixed(2);\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  function getItemsNice() {\r\n    function setEmojis() {\r\n      cartItems.forEach((item) => {\r\n        switch (item.name) {\r\n          case \"Bananas\":\r\n            item.style = \"banana\";\r\n            break;\r\n          case \"Apples\":\r\n            item.style = \"apple\";\r\n            break;\r\n          case \"Oranges\":\r\n            item.style = \"orange\";\r\n            break;\r\n          case \"Peaches\":\r\n            item.style = \"peach\";\r\n            break;\r\n          case \"Melon\":\r\n            item.style = \"melon\";\r\n            break;\r\n          case \"Blueberries\":\r\n            item.style = \"blueberries\";\r\n            break;\r\n          default:\r\n            item.style = \"none\";\r\n        }\r\n      });\r\n    }\r\n\r\n    setEmojis();\r\n    const orderSum = cartItems.map((item) => (\r\n      <li value={item.qty} style={{ listStyle: item.style }}>\r\n        {item.name} x ({item.qty}): £{item.price.toFixed(2)}\r\n      </li>\r\n    ));\r\n\r\n    return orderSum;\r\n  }\r\n\r\n  return (\r\n    <div style={paymentFormStyle}>\r\n      <Elements stripe={promise}>\r\n        <AlertBox />\r\n        <div id=\"checkout\">\r\n          <h3>Order Summary:</h3>\r\n          {getItemsNice()}\r\n          <h3>Total:</h3>£{getTotal()}\r\n          <div\r\n            style={{\r\n              border: \"2px solid\",\r\n              padding: \"8px\",\r\n              width: \"min-content\",\r\n            }}\r\n          >\r\n            <CheckoutForm total={totalCost} />\r\n          </div>\r\n        </div>\r\n      </Elements>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}